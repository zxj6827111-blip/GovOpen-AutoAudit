# 测试策略（Test Strategy v0.2）

## 1. 必须做“可控测试靶场”的原因
线上站点可能长期“合格”，无法验证 FAIL/风控/UNCERTAIN 等关键路径。靶场保证每条规则都有可重复验证的样例。

## 2. 靶场（sandbox）最小要求（至少 8 场景）
1) PASS：机构信息齐全
2) FAIL：缺负责人
3) FAIL：公开指南过期
4) UNCERTAIN：栏目同义词/结构变化（需要站点画像或AI建议）
5) FAIL：附件链接 404
6) 403 模拟
7) 429 模拟（限流）
8) 列表分页（页码/下一页两种）

## 3. 回放测试（record/replay）
对真实站点抓取“页面快照（HTML+截图）”作为 fixture，用规则引擎离线回放；并通过轻微篡改制造缺陷样本。

## 4. 回归门槛
- 每新增一条规则：必须新增至少 1 个靶场用例（PASS 或 FAIL）
- CI（或本地脚本）必须覆盖：导入→跑批次→导出→证据可追溯
- 关键路径必须覆盖：FAIL 无证据降级、风控降级、互斥/封顶字段校验
