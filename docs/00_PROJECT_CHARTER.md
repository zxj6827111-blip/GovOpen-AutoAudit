# 政务公开自动评估平台（GovOpen-AutoAudit）项目总纲（v0.2）

> 目标：建设一个“规则驱动 + 证据导向 + AI 辅助”的政务公开自动评估平台，支持多地区指标库（RulePack），抽样式自动检查并输出可交付报告。
>
> 本文档为项目最高约束。任何实现若与本文档冲突，以本文档为准；如需变更，先更新本文档并升版本。

## 1. 项目定位
- **平台化**：不是“宿迁系统/上海系统”，而是平台；地方差异仅体现在不同 RulePack。
- **每地一库**：宿迁/淮安/上海等各自独立指标库（RulePack），互不复用业务指标。
- **可追溯**：运行结果必须绑定 rule_pack_id + version + prompt_version（若使用AI），可回溯复现。
- **证据优先**：任何扣分（FAIL）必须有证据；无证据不得扣分（降级 UNCERTAIN）。

## 2. 硬约束（不可违背）
1) **不做全量点击**：仅抽样（最近 N + 随机 M + 触发式加深），并设置单站点内容页访问上限 X。  
2) **不做对抗**：不绕过验证码/登录/复杂反爬；触发风控即降级并记录原因，保留最后证据截图。  
3) **AI 不当裁判**：AI 仅用于页面分类/要素抽取/证据句定位/指标归类建议；最终 PASS/FAIL 由规则引擎输出。  
4) **保守判定**：看不到 ≠ 不存在；无法访问 ≠ 不合格；“不可判断”必须输出 NOT-ASSESSABLE。  
5) **最小闭环优先**：先保证 1 条规则从“导入→执行→证据→导出”跑通，再扩展管理功能与规则覆盖面。

## 3. MVP 交付范围（平台最小骨架）
- 站点库（Site）：批量导入、启停、基础分组（市/区县/部门）。
- 指标库（RulePack）：导入、版本化、启停、基础校验（rule_id唯一、字段齐全等）。
- 批次任务（BatchRun）：选择站点集合 + 选择 RulePack + 配置抽样/并发/限速 → 一键运行（夜跑优先）。
- 自动访问与采集：浏览器自动化访问入口/栏目/列表/抽样内容页，采集 DOM 文本 + 截图 + 页面快照 + 访问轨迹。
- 规则引擎：四态 PASS/FAIL/UNCERTAIN/NOT-ASSESSABLE；支持封顶/互斥（至少字段预留）。
- 报告导出：summary/issues/failures + evidence.zip。
- 可控测试靶场（sandbox）：本地可控网页，用于稳定验证 PASS/FAIL/UNCERTAIN/风控降级。
- 指标编辑转化器（authoring）：将“原始指标条款”转换为平台可导入规则；引入 AI 做“分类/建议”，但必须可审计与人工确认。

## 4. 里程碑建议
- M1（最小闭环）：导入 1 个站点 + 导入 1 条规则 → 跑批次 → 导出报告与证据包。
- M2（骨架稳定）：多站点队列、并发/限速、失败分类、下载中心、访问轨迹。
- M3（规则逐条接入）：每新增 1 条规则，必须新增靶场用例与回归测试；逐步覆盖宿迁 RulePack（或任一地区）。
- M4（AI 辅助与灾备）：仅对 Class 3 或 UNCERTAIN 触发；主备模型切换；不一致保守降级为 UNCERTAIN + 抽检。

## 5. 验收总原则（概览）
- FAIL 必须有证据（URL+截图+命中片段/快照+时间戳）。
- 风控触发不允许卡死任务；必须输出 failures（原因+最后URL+截图）。
- RulePack/Prompt 版本强绑定：可复现、可回溯。
