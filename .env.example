# GovOpen-AutoAudit 环境变量配置文件
# 
# 使用说明：
# 1. 复制此文件为 .env
# 2. 填入您的实际API密钥
# 3. .env文件会被.gitignore忽略，不会上传到Git

# =============================================================================
# AI Provider配置（用于AI辅助字段提取）
# =============================================================================

# AI Provider API Keys
# 使用ModelScope平台，所有AI模型共用同一个Key
DEEPSEEK_API_KEY=your_modelscope_api_key_here

# ========== 新增功能配置 ==========

# 深度导航功能（自动发现政务栏目）
ENABLE_DEEP_NAVIGATION=true           # 启用深度导航
MAX_NAVIGATION_DEPTH=5                 # 最大导航深度（1=仅主菜单，2=主菜单+子菜单，5=深入5层）
MAX_LINKS_PER_LEVEL=15                 # 每层最多抓取的链接数

# 截图标注功能（失败规则自动截图+红框标注）
ENABLE_SCREENSHOT_ANNOTATION=true     # 启用截图标注（已默认启用Playwright时自动生效）

# AI智能复核功能（对UNCERTAIN规则使用AI判断）
ENABLE_AI_REVIEW=true                  # 启用AI复核UNCERTAIN规则
AI_REVIEW_CONFIDENCE_THRESHOLD=0.8     # AI判断置信度阈值（>0.8才采纳）
AI_MAX_TOKENS_PER_BATCH=2000           # 每批次最大token消耗（控制成本）

# 双通道模式（Playwright优先，requests兜底）
# 当前已默认Playwright优先，无需额外配置

# =============================================================================
# AI功能控制
# =============================================================================

# 每批次最大token消耗（默认1000）
# AI_MAX_TOKENS_PER_BATCH=1000

# AI提取超时时间（秒，默认30）
# AI_TIMEOUT_SECONDS=30

# =============================================================================
# 其他配置（可选）
# =============================================================================

# 日志级别: DEBUG, INFO, WARNING, ERROR
# LOG_LEVEL=INFO

# Playwright浏览器类型: chromium, firefox, webkit
# BROWSER_TYPE=chromium

# 并发数（默认2）
# MAX_CONCURRENT_WORKERS=2

# =============================================================================
# 使用示例
# =============================================================================

# 配置完成后，运行以下命令测试：
# 
# 1. 测试AI功能:
#    python scripts/test_m3_ai.py
#
# 2. 运行批次（带AI提取）:
#    python scripts/run_pilot.py --rulepack rulepacks/jiangsu_suqian_v1_1 --sites sandbox/sites.json
#
# 注意：如果不配置API KEY，AI功能会自动禁用，系统仍可正常运行其他功能。
